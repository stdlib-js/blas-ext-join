{"version":3,"file":"index.mjs","sources":["../lib/base.js","../lib/main.js","../lib/assign.js","../lib/index.js"],"sourcesContent":["/**\n* @license Apache-2.0\n*\n* Copyright (c) 2025 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nimport dtypes from '@stdlib/ndarray-dtypes';\nimport gjoin from '@stdlib/blas-ext-base-ndarray-gjoin';\nimport factory from '@stdlib/ndarray-base-unary-reduce-strided1d-dispatch-factory';\n\n\n// VARIABLES //\n\nvar idtypes0 = dtypes( 'all' ); // input ndarray\nvar idtypes1 = [ 'generic' ];   // separator ndarray\nvar odtypes = [ 'generic' ];\nvar policies = {\n\t'output': 'same', // note: because we always return a \"generic\" ndarray, this policy is effectively ignored\n\t'casting': 'none'\n};\nvar table = {\n\t'default': gjoin\n};\n\n\n// MAIN //\n\n/**\n* Returns an ndarray created by joining elements using a separator along one or more ndarray dimensions.\n*\n* @private\n* @name join\n* @type {Function}\n* @param {ndarrayLike} x - input ndarray\n* @param {ndarrayLike} separator - separator\n* @param {Options} [options] - function options\n* @param {IntegerArray} [options.dims] - list of dimensions over which to perform operation\n* @param {boolean} [options.keepdims=false] - boolean indicating whether the reduced dimensions should be included in the returned ndarray as singleton dimensions\n* @param {*} [options.dtype] - output ndarray data type\n* @throws {TypeError} first argument must be an ndarray-like object\n* @throws {TypeError} second argument must be an ndarray-like object\n* @throws {TypeError} options argument must be an object\n* @throws {RangeError} dimension indices must not exceed input ndarray bounds\n* @throws {RangeError} number of dimension indices must not exceed the number of input ndarray dimensions\n* @throws {Error} must provide valid options\n* @returns {ndarray} output ndarray\n*\n* @example\n* import Float64Array from '@stdlib/array-float64';\n* import scalar2ndarray from '@stdlib/ndarray-from-scalar';\n* import ndarray from '@stdlib/ndarray-ctor';\n*\n* // Create a data buffer:\n* var xbuf = new Float64Array( [ 1.0, 2.0, 3.0, 4.0, 5.0, 6.0 ] );\n*\n* // Define the shape of the input array:\n* var sh = [ 3, 1, 2 ];\n*\n* // Define the array strides:\n* var sx = [ 2, 2, 1 ];\n*\n* // Define the index offset:\n* var ox = 0;\n*\n* // Create an input ndarray:\n* var x = new ndarray( 'float64', xbuf, sh, sx, ox, 'row-major' );\n*\n* // Create a separator ndarray:\n* var separator = scalar2ndarray( ',', {\n*     'dtype': 'generic'\n* });\n*\n* // Perform operation:\n* var out = join( x, separator, {\n*     'dtype': 'generic'\n* });\n* // returns <ndarray>[ '1,2,3,4,5,6' ]\n*/\nvar join = factory( table, [ idtypes0, idtypes1 ], odtypes, policies );\n\n\n// EXPORTS //\n\nexport default join;\n\n// exports: { \"assign\": \"join.assign\" }\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2025 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nimport hasOwnProp from '@stdlib/assert-has-own-property';\nimport isPlainObject from '@stdlib/assert-is-plain-object';\nimport isndarrayLike from '@stdlib/assert-is-ndarray-like';\nimport broadcastScalar from '@stdlib/ndarray-base-broadcast-scalar';\nimport maybeBroadcastArray from '@stdlib/ndarray-base-maybe-broadcast-array';\nimport nonCoreShape from '@stdlib/ndarray-base-complement-shape';\nimport getShape from '@stdlib/ndarray-shape';\nimport getOrder from '@stdlib/ndarray-order';\nimport format from '@stdlib/error-tools-fmtprodmsg';\nimport base from './base.js';\n\n\n// MAIN //\n\n/**\n* Returns an ndarray created by joining elements using a separator along an ndarray dimension.\n*\n* @param {ndarrayLike} x - input ndarray\n* @param {Options} [options] - function options\n* @param {(ndarrayLike|*)} [options.sep=','] - separator\n* @param {integer} [options.dims] - list of dimensions over which to perform operation\n* @param {boolean} [options.keepdims=false] - boolean indicating whether the reduced dimensions should be included in the returned ndarray as singleton dimensions\n* @throws {TypeError} first argument must be an ndarray-like object\n* @throws {TypeError} options argument must be an object\n* @throws {RangeError} dimension indices must not exceed input ndarray bounds\n* @throws {RangeError} number of dimension indices must not exceed the number of input ndarray dimensions\n* @throws {Error} must provide valid options\n* @returns {ndarray} output ndarray\n*\n* @example\n* import Float64Array from '@stdlib/array-float64';\n* import ndarray from '@stdlib/ndarray-ctor';\n*\n* // Create a data buffer:\n* var xbuf = new Float64Array( [ 1.0, 2.0, 3.0, 4.0, 5.0, 6.0 ] );\n*\n* // Define the shape of the input array:\n* var sh = [ 2, 3 ];\n*\n* // Define the array strides:\n* var sx = [ 3, 1 ];\n*\n* // Define the index offset:\n* var ox = 0;\n*\n* // Create an input ndarray:\n* var x = new ndarray( 'float64', xbuf, sh, sx, ox, 'row-major' );\n*\n* // Perform operation:\n* var out = join( x );\n* // returns <ndarray>[ '1,2,3,4,5,6' ]\n*/\nfunction join( x, options ) {\n\tvar nargs;\n\tvar opts;\n\tvar sh;\n\tvar s;\n\n\tnargs = arguments.length;\n\tif ( !isndarrayLike( x ) ) {\n\t\tthrow new TypeError( format( 'null5t', x ) );\n\t}\n\t// Initialize the separator:\n\ts = ',';\n\n\t// Initialize an options object:\n\topts = {\n\t\t'dtype': 'generic', // default behavior is to always return a generic ndarray\n\t\t'keepdims': false\n\t};\n\n\tif ( nargs > 1 ) {\n\t\tif ( !isPlainObject( options ) ) {\n\t\t\tthrow new TypeError( format( 'null2V', options ) );\n\t\t}\n\t\t// Resolve provided options...\n\t\tif ( hasOwnProp( options, 'sep' ) ) {\n\t\t\ts = options.sep;\n\t\t}\n\t\tif ( hasOwnProp( options, 'dims' ) ) {\n\t\t\topts.dims = options.dims;\n\t\t}\n\t\tif ( hasOwnProp( options, 'keepdims' ) ) {\n\t\t\topts.keepdims = options.keepdims;\n\t\t}\n\t}\n\t// Broadcast the separator to match the shape of the non-reduced dimensions...\n\tif ( isndarrayLike( s ) ) {\n\t\t// When not provided `dims`, the operation is performed across all dimensions and `s` is assumed to be a zero-dimensional ndarray; when `dims` is provided, we need to broadcast `s` to match the shape of the non-core dimensions...\n\t\tif ( hasOwnProp( opts, 'dims' ) ) {\n\t\t\ts = maybeBroadcastArray( s, nonCoreShape( getShape( x ), opts.dims ) ); // eslint-disable-line max-len\n\t\t}\n\t} else {\n\t\tif ( hasOwnProp( opts, 'dims' ) ) {\n\t\t\tsh = nonCoreShape( getShape( x ), opts.dims );\n\t\t} else {\n\t\t\tsh = [];\n\t\t}\n\t\ts = broadcastScalar( s, 'generic', sh, getOrder( x ) );\n\t}\n\treturn base( x, s, opts );\n}\n\n\n// EXPORTS //\n\nexport default join;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2025 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nimport hasOwnProp from '@stdlib/assert-has-own-property';\nimport isPlainObject from '@stdlib/assert-is-plain-object';\nimport isndarrayLike from '@stdlib/assert-is-ndarray-like';\nimport broadcastScalar from '@stdlib/ndarray-base-broadcast-scalar';\nimport maybeBroadcastArray from '@stdlib/ndarray-base-maybe-broadcast-array';\nimport nonCoreShape from '@stdlib/ndarray-base-complement-shape';\nimport getShape from '@stdlib/ndarray-shape';\nimport getOrder from '@stdlib/ndarray-order';\nimport format from '@stdlib/error-tools-fmtprodmsg';\nimport { assign as base } from './base.js';\n\n\n// MAIN //\n\n/**\n* Joins elements of an input ndarray using a separator along one or more ndarray dimensions and assigns the results to a provided output ndarray.\n*\n* @param {ndarrayLike} x - input ndarray\n* @param {ndarrayLike} out - output ndarray\n* @param {Options} [options] - function options\n* @param {(ndarrayLike|*)} [options.sep=','] - separator\n* @param {integer} [options.dims] - list of dimensions over which to perform operation\n* @throws {TypeError} first argument must be an ndarray-like object\n* @throws {TypeError} second argument must be an ndarray-like object\n* @throws {TypeError} options argument must be an object\n* @throws {RangeError} dimension indices must not exceed input ndarray bounds\n* @throws {RangeError} number of dimension indices must not exceed the number of input ndarray dimensions\n* @throws {Error} must provide valid options\n* @returns {ndarray} output ndarray\n*\n* @example\n* import Float64Array from '@stdlib/array-float64';\n* import scalar2ndarray from '@stdlib/ndarray-from-scalar';\n* import ndarray from '@stdlib/ndarray-ctor';\n*\n* // Create data buffers:\n* var xbuf = new Float64Array( [ 1.0, 2.0, 3.0, 4.0, 5.0, 6.0 ] );\n*\n* // Define the shape of the input array:\n* var shape = [ 2, 3 ];\n*\n* // Define the array strides:\n* var strides = [ 3, 1 ];\n*\n* // Define the index offset:\n* var offset = 0;\n*\n* // Create an input ndarray:\n* var x = new ndarray( 'float64', xbuf, shape, strides, offset, 'row-major' );\n*\n* // Create an output ndarray:\n* var y = scalar2ndarray( '', {\n*     'dtype': 'generic'\n* });\n*\n* // Perform operation:\n* var out = assign( x, y );\n* // returns <ndarray>[ '1,2,3,4,5,6' ]\n*\n* var bool = ( out === y );\n* // returns true\n*/\nfunction assign( x, out, options ) {\n\tvar nargs;\n\tvar opts;\n\tvar sh;\n\tvar s;\n\n\tnargs = arguments.length;\n\tif ( !isndarrayLike( x ) ) {\n\t\tthrow new TypeError( format( 'null5t', x ) );\n\t}\n\tif ( !isndarrayLike( out ) ) {\n\t\tthrow new TypeError( format( 'invalid argument. Second argument must be an ndarray-like object. Value: `%s`.', out ) );\n\t}\n\t// Initialize the separator:\n\ts = ',';\n\n\t// Initialize an options object:\n\topts = {};\n\n\tif ( nargs > 2 ) {\n\t\tif ( !isPlainObject( options ) ) {\n\t\t\tthrow new TypeError( format( 'null2V', options ) );\n\t\t}\n\t\t// Resolve provided options...\n\t\tif ( hasOwnProp( options, 'sep' ) ) {\n\t\t\ts = options.sep;\n\t\t}\n\t\tif ( hasOwnProp( options, 'dims' ) ) {\n\t\t\topts.dims = options.dims;\n\t\t}\n\t}\n\t// Broadcast the separator to match the shape of the non-reduced dimensions...\n\tif ( isndarrayLike( s ) ) {\n\t\t// When not provided `dims`, the operation is performed across all dimensions and `s` is assumed to be a zero-dimensional ndarray; when `dims` is provided, we need to broadcast `s` to match the shape of the non-core dimensions...\n\t\tif ( hasOwnProp( opts, 'dims' ) ) {\n\t\t\ts = maybeBroadcastArray( s, nonCoreShape( getShape( x ), opts.dims ) ); // eslint-disable-line max-len\n\t\t}\n\t} else {\n\t\tif ( hasOwnProp( opts, 'dims' ) ) {\n\t\t\tsh = nonCoreShape( getShape( x ), opts.dims );\n\t\t} else {\n\t\t\tsh = [];\n\t\t}\n\t\ts = broadcastScalar( s, 'generic', sh, getOrder( x ) );\n\t}\n\treturn base( x, s, out, opts );\n}\n\n\n// EXPORTS //\n\nexport default assign;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2025 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n/**\n* Return an ndarray created by joining elements using a separator along an ndarray dimension.\n*\n* @module @stdlib/blas-ext-join\n*\n* @example\n* import Float64Array from '@stdlib/array-float64';\n* import ndarray from '@stdlib/ndarray-ctor';\n* import join from '@stdlib/blas-ext-join';\n*\n* // Create a data buffer:\n* var xbuf = new Float64Array( [ 1.0, 2.0, 3.0, 4.0, 5.0, 6.0 ] );\n*\n* // Define the shape of the input array:\n* var sh = [ 2, 3 ];\n*\n* // Define the array strides:\n* var sx = [ 3, 1 ];\n*\n* // Define the index offset:\n* var ox = 0;\n*\n* // Create an input ndarray:\n* var x = new ndarray( 'float64', xbuf, sh, sx, ox, 'row-major' );\n*\n* // Perform operation:\n* var out = join( x );\n* // returns <ndarray>[ '1,2,3,4,5,6' ]\n*/\n\n// MODULES //\n\nimport setReadOnly from '@stdlib/utils-define-nonenumerable-read-only-property';\nimport main from './main.js';\nimport assign from './assign.js';\n\n\n// MAIN //\n\nsetReadOnly( main, 'assign', assign );\n\n\n// EXPORTS //\n\nexport default main;\n\n// exports: { \"assign\": \"main.assign\" }\n"],"names":["join","factory","default","gjoin","dtypes","output","casting","x","options","nargs","opts","sh","s","arguments","length","isndarrayLike","TypeError","format","dtype","keepdims","isPlainObject","hasOwnProp","sep","dims","maybeBroadcastArray","nonCoreShape","getShape","broadcastScalar","getOrder","base","assign","out","setReadOnly","main"],"mappings":";;mxCA6BA,IAiEAA,EAAAC,EA1DA,CACAC,QAAAC,GAyDA,CAjEAC,EAAA,OACA,CAAA,YACA,CAAA,WACA,CACAC,OAAA,OACAC,QAAA,2BCwCA,SAASN,EAAMO,EAAGC,GACjB,IAAIC,EACAC,EACAC,EACAC,EAGJ,GADAH,EAAQI,UAAUC,QACZC,EAAeR,GACpB,MAAM,IAAIS,UAAWC,EAAQ,SAAUV,IAWxC,GARAK,EAAI,IAGJF,EAAO,CACNQ,MAAS,UACTC,UAAY,GAGRV,EAAQ,EAAI,CAChB,IAAMW,EAAeZ,GACpB,MAAM,IAAIQ,UAAWC,EAAQ,SAAUT,IAGnCa,EAAYb,EAAS,SACzBI,EAAIJ,EAAQc,KAERD,EAAYb,EAAS,UACzBE,EAAKa,KAAOf,EAAQe,MAEhBF,EAAYb,EAAS,cACzBE,EAAKS,SAAWX,EAAQW,SAEzB,CAeD,OAbKJ,EAAeH,GAEdS,EAAYX,EAAM,UACtBE,EAAIY,EAAqBZ,EAAGa,EAAcC,EAAUnB,GAAKG,EAAKa,SAI9DZ,EADIU,EAAYX,EAAM,QACjBe,EAAcC,EAAUnB,GAAKG,EAAKa,MAElC,GAENX,EAAIe,EAAiBf,EAAG,UAAWD,EAAIiB,EAAUrB,KAE3CsB,EAAMtB,EAAGK,EAAGF,EACpB,CCvCA,SAASoB,EAAQvB,EAAGwB,EAAKvB,GACxB,IAAIC,EACAC,EACAC,EACAC,EAGJ,GADAH,EAAQI,UAAUC,QACZC,EAAeR,GACpB,MAAM,IAAIS,UAAWC,EAAQ,SAAUV,IAExC,IAAMQ,EAAegB,GACpB,MAAM,IAAIf,UAAWC,EAAQ,iFAAkFc,IAQhH,GALAnB,EAAI,IAGJF,EAAO,CAAA,EAEFD,EAAQ,EAAI,CAChB,IAAMW,EAAeZ,GACpB,MAAM,IAAIQ,UAAWC,EAAQ,SAAUT,IAGnCa,EAAYb,EAAS,SACzBI,EAAIJ,EAAQc,KAERD,EAAYb,EAAS,UACzBE,EAAKa,KAAOf,EAAQe,KAErB,CAeD,OAbKR,EAAeH,GAEdS,EAAYX,EAAM,UACtBE,EAAIY,EAAqBZ,EAAGa,EAAcC,EAAUnB,GAAKG,EAAKa,SAI9DZ,EADIU,EAAYX,EAAM,QACjBe,EAAcC,EAAUnB,GAAKG,EAAKa,MAElC,GAENX,EAAIe,EAAiBf,EAAG,UAAWD,EAAIiB,EAAUrB,KAE3CsB,EAAMtB,EAAGK,EAAGmB,EAAKrB,EACzB,CCvEAsB,EAAAC,EAAA,SAAAH"}